[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:25 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554365},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:9091/jmxrmi","alias":"io.cryostat.Cryostat","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9091","JAVA_MAIN":"io.cryostat.Cryostat"}}}}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:27 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554367},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:9093/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9093","JAVA_MAIN":"es.andrewazor.demo.Main"}}}}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:27 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554367},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:9094/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9094","JAVA_MAIN":"es.andrewazor.demo.Main"}}}}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:27 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554367},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:9095/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9095","JAVA_MAIN":"es.andrewazor.demo.Main"}}}}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:27 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554367},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:9096/jmxrmi","alias":"/deployments/quarkus-run.jar","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9096","JAVA_MAIN":"/deployments/quarkus-run.jar"}}}
[m}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:19:28 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554368},"message":{"event":{"kind":"FOUND","serviceRef":{"connectUrl":"service:j
[mmx:rmi:///jndi/rmi://cryostat:10000/jmxrmi","alias":"/deployments/quarkus-run.jar","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"10000","JAVA_MAIN":"/deployments/quarkus-run.jar"}
[m}}}}}

[m^CAug 03, 2022 7:20:25 PM io.cryostat.core.log.Logger info
[mINFO: cryostat shutting down...
[m+ cleanup
[m+ podman pod stop cryostat-pod
[m3d3de2ef731b7544afb5bf0f75534e08849504b6a36a4736329d85d7664d1be6
[m+ podman pod rm cryostat-pod
[m3d3de2ef731b7544afb5bf0f75534e08849504b6a36a4736329d85d7664d1be6
[m[1;32mandrew@carbon [34m~/workspace/cryostat[31m :([33m (pluggable-discovery-hibernate) [34m$[22;39m sh smoketest.sh postgres-pgcli
[m+ set -e
[m+ trap destroyPod EXIT
[m+ createPod
[m++ xpath -q -e 'project/properties/cryostat.rjmxPort/text()' pom.xml
[m+ local jmxPort=9091
[m++ xpath -q -e 'project/properties/cryostat.webPort/text()' pom.xml
[m+ local webPort=8181
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local datasourcePort=8080
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.port/text()' pom.xml
[m+ local grafanaPort=3000
[m+ podman pod create --replace --hostname cryostat --name cryostat-pod --publish 9091:9091 --publish 8181:8181 --publish 8080:8080 --publish 3000:3000 --publish 5432:5432 --publish 8081:8081 --publish 9093:9093 --
[mpublish 9094:9094 --publish 9095:9095 --publish 9096:9096 --publish 9999:9999 --publish 8082:8082 --publish 9990:9990 --publish 9991:9991 --publish 10000:10000 --publish 10001:10001
[mc0d6f4f5ed76ae36f714b119f9e63e150ff702eb55bd8aba8a694fd710c0ad05
[m+ '[' postgres-pgcli = postgres ']'
[m+ '[' postgres-pgcli = postgres-pgcli ']'
[m+ runPostgres
[m++ dirname smoketest.sh
[m+ '[' '!' -d ./conf/postgres ']'
[m++ xpath -q -e 'project/properties/postgres.image/text()' pom.xml
[m+ local image=docker.io/postgres
[m++ xpath -q -e 'project/properties/postgres.version/text()' pom.xml
[m+ local version=13
[m++ dirname smoketest.sh
[m++ dirname smoketest.sh
[m+ podman run --name postgres --pod cryostat-pod --env POSTGRES_USER=postgres --env POSTGRES_PASSWORD=abcd1234 --mount type=bind,source=./conf/postgres,destination=/var/lib/postgresql/data/pgdata,relabel=shared --
[mmount type=bind,source=./src/test/resources/postgres,destination=/docker-entrypoint.initdb.d,relabel=shared --env PGDATA=/var/lib/postgresql/data/pgdata --rm -d docker.io/postgres:13
[m1a8ce7bc304bb9c7d399f67e7581b8c15ef85a739d616d7ac7b9426763f0f5bc
[m+ sleep 5
[m+ PGPASSWORD=abcd1234
[m+ psql -h localhost -p 5432 -U postgres -f src/test/resources/postgres/postgre.sql
[mpsql:src/test/resources/postgres/postgre.sql:10: NOTICE:  relation "plugininfo" already exists, skipping
[mCREATE TABLE
[m+ PGPASSWORD=abcd1234
[m+ pgcli -h localhost -p 5432 -U postgres
[mServer: PostgreSQL 13.7 (Debian 13.7-1.pgdg110+1)
[mVersion: 3.1.0
[mChat: https://gitter.im/dbcli/pgcli
[mHome: http://pgcli.com
[mpostgres@localhost:postgres> \dt
[m+--------+------------+-------+----------+
[m| [1;38:5:47mSchema[22;39m | [1;38:5:47mName[22;39m       | [1;38:5:47mType[22;39m  | [1;38:5:47mOwner[22;39m    |
[m|--------+------------+-------+----------|
[m| public | plugininfo | table | postgres |
[m+--------+------------+-------+----------+
[mSELECT 1
[mTime: 0.007s
[mpostgres@localhost:postgres> [1;38:5:28mselect[22;38:5:250m [38:5:241m*[38:5:250m [1;38:5:28mfrom[22;38:5:250m [39mplugininfo
[m+----+----------+-------+---------+
[m| [1;38:5:47mid[22;39m | [1;38:5:47mcallback[22;39m | [1;38:5:47mrealm[22;39m | [1;38:5:47msubtree[22;39m |
[m|----+----------+-------+---------|
[m+----+----------+-------+---------+
[mSELECT 0
[mTime: 0.004s
[m[38:5:102mpostgres@localhost:postgres>                                                                                                                                                                                        
[mGoodbye!
[m+ exit
[m+ destroyPod
[m+ podman stop quarkus-test-plugin
[mError: no container with name or ID "quarkus-test-plugin" found: no such container
[m[1;32mandrew@carbon [34m~/workspace/cryostat[31m :([33m (pluggable-discovery-hibernate) [34m$[22;39m sh smoketest.sh postgres
[m+ set -e
[m+ trap destroyPod EXIT
[m+ createPod
[m++ xpath -q -e 'project/properties/cryostat.rjmxPort/text()' pom.xml
[m+ local jmxPort=9091
[m++ xpath -q -e 'project/properties/cryostat.webPort/text()' pom.xml
[m+ local webPort=8181
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local datasourcePort=8080
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.port/text()' pom.xml
[m+ local grafanaPort=3000
[m+ podman pod create --replace --hostname cryostat --name cryostat-pod --publish 9091:9091 --publish 8181:8181 --publish 8080:8080 --publish 3000:3000 --publish 5432:5432 --publish 8081:8081 --publish 9093:9093 --
[mpublish 9094:9094 --publish 9095:9095 --publish 9096:9096 --publish 9999:9999 --publish 8082:8082 --publish 9990:9990 --publish 9991:9991 --publish 10000:10000 --publish 10001:10001
[m740249fa625d6b5fa8024cb1a86c56e85334dc9d78ba81aa58ad190bfcaf3d78
[m+ '[' postgres = postgres ']'
[m+ runPostgres
[m++ dirname smoketest.sh
[m+ '[' '!' -d ./conf/postgres ']'
[m++ xpath -q -e 'project/properties/postgres.image/text()' pom.xml
[m+ local image=docker.io/postgres
[m++ xpath -q -e 'project/properties/postgres.version/text()' pom.xml
[m+ local version=13
[m++ dirname smoketest.sh
[m++ dirname smoketest.sh
[m+ podman run --name postgres --pod cryostat-pod --env POSTGRES_USER=postgres --env POSTGRES_PASSWORD=abcd1234 --mount type=bind,source=./conf/postgres,destination=/var/lib/postgresql/data/pgdata,relabel=shared --
[mmount type=bind,source=./src/test/resources/postgres,destination=/docker-entrypoint.initdb.d,relabel=shared --env PGDATA=/var/lib/postgresql/data/pgdata --rm -d docker.io/postgres:13
[mfea848ed8cf1416c61f18d4319d2b0383e8cb14cde0fb77373b947871f914984
[m+ sleep 5
[m+ PGPASSWORD=abcd1234
[m+ psql -h localhost -p 5432 -U postgres -f src/test/resources/postgres/postgre.sql
[mpsql:src/test/resources/postgres/postgre.sql:10: NOTICE:  relation "plugininfo" already exists, skipping
[mCREATE TABLE
[m+ runDemoApps
[m+ podman run --name vertx-fib-demo-1 --env HTTP_PORT=8081 --env JMX_PORT=9093 --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[m3eb9cec6cda5b46122c4cae54c420ed358c0847c122a07356b0cbe4c6571a9be
[m+ podman run --name vertx-fib-demo-2 --env HTTP_PORT=8081 --env JMX_PORT=9094 --env USE_AUTH=true --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[mb803d92aec133c5bfcd94433caea5fa36be7cca05279d1fe7d443795ae98c36a
[m+ podman run --name vertx-fib-demo-3 --env HTTP_PORT=8081 --env JMX_PORT=9095 --env USE_SSL=true --env USE_AUTH=true --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[mae666b98cda5223f72d06341b7f0e90c0d0d59c628f955e223aa728aa24be9a3
[m+ podman run --name quarkus-test --pod cryostat-pod --rm -d quay.io/andrewazores/quarkus-test:0.0.2
[m2ccf387031d059e460ed515d0bc00cab10637707c7e325d257a391064c9f5c4d
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webPort/text()' pom.xml
[m+ local webPort=8181
[m+ '[' -z '' ']'
[m+ local protocol=https
[m++ echo -n user:pass
[m++ base64
[m+ podman run --name quarkus-test-plugin --pod cryostat-pod --restart unless-stopped --env 'org.acme.CryostatService.Authorization=Basic dXNlcjpwYXNz' --env org.acme.CryostatService/mp-rest/url=https://localhost:8
[m181 --env org.acme.CryostatService.callback-host=localhost -d quay.io/andrewazores/quarkus-test:0.0.3
[mf881135671ddaf338aea3a58140a50636cb265c76a45d9f6c6160a6390be63db
[m+ podman run --name wildfly --pod cryostat-pod --rm -d quay.io/andrewazores/wildfly-demo:v0.0.1
[m8042645505dbf7430642da9b36cff33602d0dab117798f73b4419dcf0cc589ac
[m+ runJfrDatasource
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.imageStream/text()' pom.xml
[m+ local stream=quay.io/cryostat/jfr-datasource
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.version/text()' pom.xml
[m+ local tag=latest
[m+ podman run --name jfr-datasource --pull always --pod cryostat-pod --rm -d quay.io/cryostat/jfr-datasource:latest
[mTrying to pull quay.io/cryostat/jfr-datasource:latest...
[mGetting image source signatures
[mCopying blob 16efd4d8dcb5 skipped: already exists  
[mCopying blob f3ae3fb50e1f skipped: already exists  
[mCopying blob e7bef371de76 skipped: already exists  
[mCopying blob 3cbba8687c73 skipped: already exists  
[mCopying config ea6027fd50 done  
[mWriting manifest to image destination
[mStoring signatures
[m5d7418dd02d2ba21902d032e67c2cd403a7a9c83b0e3e04bad77a64820d371b0
[m+ runGrafana
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.imageStream/text()' pom.xml
[m+ local stream=quay.io/cryostat/cryostat-grafana-dashboard
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.version/text()' pom.xml
[m+ local tag=latest
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ local host=localhost
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local port=8080
[m+ podman run --name grafana --pull always --pod cryostat-pod --env GF_INSTALL_PLUGINS=grafana-simple-json-datasource --env GF_AUTH_ANONYMOUS_ENABLED=true --env JFR_DATASOURCE_URL=http://localhost:8080 --rm -d qua
[my.io/cryostat/cryostat-grafana-dashboard:latest
[mTrying to pull quay.io/cryostat/cryostat-grafana-dashboard:latest...
[mGetting image source signatures
[mCopying blob 4f4fb700ef54 skipped: already exists  
[mCopying blob 3896f1893b61 skipped: already exists  
[mCopying blob a47a61bc8014 skipped: already exists  
[mCopying blob 4183cf92ef8e skipped: already exists  
[mCopying blob 5fb705585048 skipped: already exists  
[mCopying blob d62880248252 skipped: already exists  
[mCopying blob 5798cae55176 skipped: already exists  
[mCopying blob d2fd0d291977 skipped: already exists  
[mCopying blob d5c8461e15b5 skipped: already exists  
[mCopying blob 09c9792bc5e2 skipped: already exists  
[mCopying blob 5758d4e389a3 skipped: already exists  
[mCopying config ddd560e672 done  
[mWriting manifest to image destination
[mStoring signatures
[m9ad600df441ef932f69743256a22adea86e0bfd9b79714c3a15f6a8c77b04a09
[m+ runReportGenerator
[m+ local RJMX_PORT=10000
[m+ podman run --name reports --pull always --pod cryostat-pod --cpus 1 --memory 512M --restart on-failure --env 'JAVA_OPTIONS=-XX:ActiveProcessorCount=1 -XX:+UseSerialGC -Dorg.openjdk.jmc.flightrecorder.parser.sin
[mglethreaded=true -Dcom.sun.management.jmxremote.autodiscovery=true -Dcom.sun.management.jmxremote.port=10000 -Dcom.sun.management.jmxremote.rmi.port=10000 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.s
[mun.management.jmxremote.ssl=false' --env QUARKUS_HTTP_PORT=10001 --rm -d quay.io/cryostat/cryostat-reports:latest
[mTrying to pull quay.io/cryostat/cryostat-reports:latest...
[mGetting image source signatures
[mCopying blob 3c9734871c15 skipped: already exists  
[mCopying blob e285ba5d0a41 skipped: already exists  
[mCopying blob 477cdcaeeeba skipped: already exists  
[mCopying blob 537e009ccda2 skipped: already exists  
[mCopying blob 873b36ac1cc0 skipped: already exists  
[mCopying blob d6aced47e09c skipped: already exists  
[mCopying blob be732b39cdc4 skipped: already exists  
[mCopying config e4065524ca done  
[mWriting manifest to image destination
[mStoring signatures
[mf3c8dcb118ac0e58102a80ea7b2180a9381b8cf01a0d29d7417de57345f51f71
[m+ runCryostat postgres
[m+++ readlink -f smoketest.sh
[m++ dirname /home/andrew/workspace/cryostat/smoketest.sh
[m+ local DIR=/home/andrew/workspace/cryostat
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ local host=localhost
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local datasourcePort=8080
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.port/text()' pom.xml
[m+ local grafanaPort=3000
[m+ '[' postgres = postgres ']'
[m+ JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat
[m+ JDBC_DRIVER=org.postgresql.Driver
[m+ HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect
[m+ JDBC_USERNAME=postgres
[m+ JDBC_PASSWORD=abcd1234
[m+ HBM2DDL=update
[m+ GRAFANA_DATASOURCE_URL=http://localhost:8080
[m+ GRAFANA_DASHBOARD_URL=http://localhost:3000
[m+ CRYOSTAT_RJMX_USER=smoketest
[m+ CRYOSTAT_RJMX_PASS=smoketest
[m+ CRYOSTAT_ALLOW_UNTRUSTED_SSL=true
[m+ CRYOSTAT_REPORT_GENERATOR=http://localhost:10001
[m+ CRYOSTAT_AUTH_MANAGER=io.cryostat.net.BasicAuthManager
[m+ CRYOSTAT_JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat
[m+ CRYOSTAT_JDBC_DRIVER=org.postgresql.Driver
[m+ CRYOSTAT_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect
[m+ CRYOSTAT_JDBC_USERNAME=postgres
[m+ CRYOSTAT_JDBC_PASSWORD=abcd1234
[m+ CRYOSTAT_HBM2DDL=update
[m+ exec /home/andrew/workspace/cryostat/run.sh
[m+ set -e
[m+ trap cleanup EXIT
[m+ '[' -z '' ']'
[m+ CRYOSTAT_IMAGE=quay.io/cryostat/cryostat:latest
[m+ echo -e '\n\nRunning quay.io/cryostat/cryostat:latest ...\n\n'


[mRunning quay.io/cryostat/cryostat:latest ...


[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.rjmxPort/text()' pom.xml
[m+ CRYOSTAT_RJMX_PORT=9091
[m+ '[' -z '' ']'
[m+ CRYOSTAT_RMI_PORT=9091
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ CRYOSTAT_WEB_HOST=localhost
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webPort/text()' pom.xml
[m+ CRYOSTAT_WEB_PORT=8181
[m+ '[' -z '' ']'
[m+ CRYOSTAT_EXT_WEB_PORT=8181
[m+ '[' -z io.cryostat.net.BasicAuthManager ']'
[m+ '[' -z '' ']'
[m+ CRYOSTAT_REPORT_GENERATION_MAX_HEAP=200
[m+ '[' -z '' ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' -f /home/andrew/workspace/cryostat/certs/cryostat-keystore.p12 ']'
[m+ KEYSTORE_PATH=/certs/cryostat-keystore.p12
[m+++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ cat /home/andrew/workspace/cryostat/certs/keystore.pass
[m+ KEYSTORE_PASS=XmB0OAa1wRAVWp0OBOM85--lHV4zJHNk
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/archive ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf/credentials ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf/rules ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/truststore ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/clientlib ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/templates ']'
[m+ podman pod exists cryostat-pod
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ podman run --pod cryostat-pod --name cryostat --user 0 --memory 768M --mount type=bind,source=/home/andrew/workspace/cryostat/archive,destination=/opt/cryostat.d/recordings.d,relabel=shared --mount type=bind,so
[murce=/home/andrew/workspace/cryostat/certs,destination=/certs,relabel=shared --mount type=bind,source=/home/andrew/workspace/cryostat/clientlib,destination=/clientlib,relabel=shared --mount type=bind,source=/home
[m/andrew/workspace/cryostat/conf,destination=/opt/cryostat.d/conf.d,relabel=shared --mount type=bind,source=/home/andrew/workspace/cryostat/templates,destination=/opt/cryostat.d/templates.d,relabel=shared --mount 
[mtype=bind,source=/home/andrew/workspace/cryostat/truststore,destination=/truststore,relabel=shared --mount type=tmpfs,target=/opt/cryostat.d/probes.d -e CRYOSTAT_ENABLE_JDP_BROADCAST=true -e CRYOSTAT_REPORT_GENER
[mATOR=http://localhost:10001 -e CRYOSTAT_PLATFORM= -e CRYOSTAT_DISABLE_BUILTIN_DISCOVERY= -e CRYOSTAT_DISABLE_SSL= -e CRYOSTAT_DISABLE_JMX_AUTH= -e CRYOSTAT_ALLOW_UNTRUSTED_SSL=true -e CRYOSTAT_RJMX_USER=smoketest
[m -e CRYOSTAT_RJMX_PASS=smoketest -e CRYOSTAT_RJMX_PORT=9091 -e CRYOSTAT_RMI_PORT=9091 -e CRYOSTAT_CORS_ORIGIN= -e CRYOSTAT_WEB_HOST=localhost -e CRYOSTAT_WEB_PORT=8181 -e CRYOSTAT_EXT_WEB_PORT=8181 -e CRYOSTAT_MA
[mX_WS_CONNECTIONS= -e CRYOSTAT_AUTH_MANAGER=io.cryostat.net.BasicAuthManager -e CRYOSTAT_TARGET_CACHE_SIZE= -e CRYOSTAT_TARGET_CACHE_TTL= -e CRYOSTAT_CONFIG_PATH=/opt/cryostat.d/conf.d -e CRYOSTAT_ARCHIVE_PATH=/op
[mt/cryostat.d/recordings.d -e CRYOSTAT_TEMPLATE_PATH=/opt/cryostat.d/templates.d -e CRYOSTAT_PROBE_TEMPLATE_PATH=/opt/cryostat.d/probes.d -e CRYOSTAT_CLIENTLIB_PATH=/clientlib -e CRYOSTAT_REPORT_GENERATION_MAX_HEA
[mP=200 -e GRAFANA_DATASOURCE_URL=http://localhost:8080 -e GRAFANA_DASHBOARD_URL=http://localhost:3000 -e KEYSTORE_PATH=/certs/cryostat-keystore.p12 -e KEYSTORE_PASS=XmB0OAa1wRAVWp0OBOM85--lHV4zJHNk -e KEY_PATH= -e
[m CERT_PATH= -e CRYOSTAT_JUL_CONFIG= -e CRYOSTAT_JDBC_DRIVER=org.postgresql.Driver -e CRYOSTAT_JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat -e CRYOSTAT_JDBC_USERNAME=postgres -e CRYOSTAT_JDBC_PASSWORD=abcd123
[m4 -e CRYOSTAT_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect -e CRYOSTAT_HBM2DDL=update --rm -it quay.io/cryostat/cryostat:latest
[mImporting certificate /truststore/vertx-fib-demo.cer ...
[mCertificate was added to keystore
[m[Storing /opt/cryostat.d/truststore.p12]
[mImporting certificate /truststore/dev-self-signed.cer ...
[mCertificate was added to keystore
[m[Storing /opt/cryostat.d/truststore.p12]
[m+ exec java -XX:+CrashOnOutOfMemoryError -Dcom.sun.management.jmxremote.port=9091 -Dcom.sun.management.jmxremote.rmi.port=9091 -Djavax.net.ssl.trustStore=/opt/cryostat.d/truststore.p12 -Djavax.net.ssl.trustStoreP
[massword=FfYDSbBL0meWCVXKUyuPYNWgys12OWBR -Dcom.sun.management.jmxremote.autodiscovery=true -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/tmp/jmxremote.password -Dc
[mom.sun.management.jmxremote.access.file=/tmp/jmxremote.access -Dcom.sun.management.jmxremote.ssl.need.client.auth=true -Djavax.net.ssl.keyStore=/certs/cryostat-keystore.p12 -Djavax.net.ssl.keyStorePassword=XmB0OA
[ma1wRAVWp0OBOM85--lHV4zJHNk -Dcom.sun.management.jmxremote.ssl=true -Dcom.sun.management.jmxremote.registry.ssl=true -cp '/app/resources:/app/classes:/app/libs/cryostat-core-2.12.0.jar:/app/libs/common-7.1.1.jar:/
[mapp/libs/encoder-1.2.2.jar:/app/libs/flightrecorder-7.1.1.jar:/app/libs/flightrecorder.rules-7.1.1.jar:/app/libs/flightrecorder.rules.jdk-7.1.1.jar:/app/libs/nashorn-core-15.4.jar:/app/libs/asm-7.3.1.jar:/app/lib
[ms/asm-commons-7.3.1.jar:/app/libs/asm-analysis-7.3.1.jar:/app/libs/asm-tree-7.3.1.jar:/app/libs/asm-util-7.3.1.jar:/app/libs/openshift-client-5.4.1.jar:/app/libs/openshift-model-5.4.1.jar:/app/libs/kubernetes-mod
[mel-common-5.4.1.jar:/app/libs/jackson-annotations-2.11.2.jar:/app/libs/openshift-model-operator-5.4.1.jar:/app/libs/openshift-model-operatorhub-5.4.1.jar:/app/libs/openshift-model-monitoring-5.4.1.jar:/app/libs/o
[mpenshift-model-console-5.4.1.jar:/app/libs/kubernetes-client-5.4.1.jar:/app/libs/kubernetes-model-core-5.4.1.jar:/app/libs/kubernetes-model-rbac-5.4.1.jar:/app/libs/kubernetes-model-admissionregistration-5.4.1.ja
[mr:/app/libs/kubernetes-model-apps-5.4.1.jar:/app/libs/kubernetes-model-autoscaling-5.4.1.jar:/app/libs/kubernetes-model-apiextensions-5.4.1.jar:/app/libs/kubernetes-model-batch-5.4.1.jar:/app/libs/kubernetes-mode
[ml-certificates-5.4.1.jar:/app/libs/kubernetes-model-coordination-5.4.1.jar:/app/libs/kubernetes-model-discovery-5.4.1.jar:/app/libs/kubernetes-model-events-5.4.1.jar:/app/libs/kubernetes-model-extensions-5.4.1.ja
[mr:/app/libs/kubernetes-model-flowcontrol-5.4.1.jar:/app/libs/kubernetes-model-networking-5.4.1.jar:/app/libs/kubernetes-model-metrics-5.4.1.jar:/app/libs/kubernetes-model-policy-5.4.1.jar:/app/libs/kubernetes-mod
[mel-scheduling-5.4.1.jar:/app/libs/kubernetes-model-storageclass-5.4.1.jar:/app/libs/kubernetes-model-node-5.4.1.jar:/app/libs/okhttp-3.12.12.jar:/app/libs/okio-1.15.0.jar:/app/libs/logging-interceptor-3.12.12.jar
[m:/app/libs/slf4j-api-1.7.30.jar:/app/libs/jackson-dataformat-yaml-2.11.2.jar:/app/libs/snakeyaml-1.26.jar:/app/libs/jackson-datatype-jsr310-2.11.2.jar:/app/libs/jackson-databind-2.11.2.jar:/app/libs/jackson-core-
[m2.11.2.jar:/app/libs/zjsonpatch-0.3.0.jar:/app/libs/generex-1.0.2.jar:/app/libs/automaton-1.11-8.jar:/app/libs/dagger-2.34.1.jar:/app/libs/javax.inject-1.jar:/app/libs/commons-lang3-3.12.0.jar:/app/libs/commons-c
[modec-1.15.jar:/app/libs/commons-io-2.8.0.jar:/app/libs/commons-validator-1.7.jar:/app/libs/commons-beanutils-1.9.4.jar:/app/libs/commons-digester-2.1.jar:/app/libs/commons-logging-1.2.jar:/app/libs/commons-collec
[mtions-3.2.2.jar:/app/libs/httpclient-4.5.13.jar:/app/libs/httpcore-4.4.13.jar:/app/libs/vertx-web-4.2.5.jar:/app/libs/vertx-web-common-4.2.5.jar:/app/libs/vertx-auth-common-4.2.5.jar:/app/libs/vertx-bridge-common
[m-4.2.5.jar:/app/libs/vertx-core-4.2.5.jar:/app/libs/netty-common-4.1.74.Final.jar:/app/libs/netty-buffer-4.1.74.Final.jar:/app/libs/netty-transport-4.1.74.Final.jar:/app/libs/netty-handler-4.1.74.Final.jar:/app/l
[mibs/netty-codec-4.1.74.Final.jar:/app/libs/netty-tcnative-classes-2.0.48.Final.jar:/app/libs/netty-handler-proxy-4.1.74.Final.jar:/app/libs/netty-codec-socks-4.1.74.Final.jar:/app/libs/netty-codec-http-4.1.74.Fin
[mal.jar:/app/libs/netty-codec-http2-4.1.74.Final.jar:/app/libs/netty-resolver-4.1.74.Final.jar:/app/libs/netty-resolver-dns-4.1.74.Final.jar:/app/libs/netty-codec-dns-4.1.74.Final.jar:/app/libs/vertx-web-client-4.
[m2.5.jar:/app/libs/vertx-web-graphql-4.2.5.jar:/app/libs/graphql-java-17.3.jar:/app/libs/java-dataloader-3.1.0.jar:/app/libs/antlr4-runtime-4.9.2.jar:/app/libs/reactive-streams-1.0.3.jar:/app/libs/graphql-java-ext
[mended-scalars-17.0.jar:/app/libs/nimbus-jose-jwt-9.16.1.jar:/app/libs/jcip-annotations-1.0-1.jar:/app/libs/bcprov-jdk15on-1.69.jar:/app/libs/slf4j-jdk14-1.7.30.jar:/app/libs/gson-2.8.9.jar:/app/libs/caffeine-3.0.
[m1.jar:/app/libs/jsoup-1.14.2.jar:/app/libs/hibernate-core-5.6.7.Final.jar:/app/libs/jboss-logging-3.4.3.Final.jar:/app/libs/javax.persistence-api-2.2.jar:/app/libs/byte-buddy-1.12.8.jar:/app/libs/antlr-2.7.7.jar:
[m/app/libs/jboss-transaction-api_1.2_spec-1.1.1.Final.jar:/app/libs/jandex-2.4.2.Final.jar:/app/libs/classmate-1.5.1.jar:/app/libs/javax.activation-api-1.2.0.jar:/app/libs/hibernate-commons-annotations-5.1.2.Final
[m.jar:/app/libs/jaxb-api-2.3.1.jar:/app/libs/jaxb-runtime-2.3.1.jar:/app/libs/txw2-2.3.1.jar:/app/libs/istack-commons-runtime-3.0.7.jar:/app/libs/stax-ex-1.8.jar:/app/libs/FastInfoset-1.2.15.jar:/app/libs/hibernat
[me-types-55-2.17.1.jar:/app/libs/h2-1.4.197.jar:/app/libs/postgresql-42.4.0.jar:/app/libs/checker-qual-3.5.0.jar:/clientlib/*' @/app/jib-main-class-file
[mAug 03, 2022 7:21:08 PM io.cryostat.core.log.Logger info
[mINFO: Local config path set as /opt/cryostat.d/conf.d
[mAug 03, 2022 7:21:08 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation
[mINFO: HHH000204: Processing PersistenceUnitInfo [name: io.cryostat]
[mAug 03, 2022 7:21:08 PM org.hibernate.Version logVersion
[mINFO: HHH000412: Hibernate ORM core version 5.6.7.Final
[mAug 03, 2022 7:21:08 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager <clinit>
[mINFO: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[mAug 03, 2022 7:21:08 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
[mWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)
[mAug 03, 2022 7:21:08 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001005: using driver [org.postgresql.Driver] at URL [jdbc:postgresql://cryostat:5432/cryostat]
[mAug 03, 2022 7:21:08 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001001: Connection properties: {password=****, user=postgres}
[mAug 03, 2022 7:21:08 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001003: Autocommit mode: false
[mAug 03, 2022 7:21:08 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections <init>
[mINFO: HHH000115: Hibernate connection pool size: 20 (min=1)
[mAug 03, 2022 7:21:08 PM org.hibernate.dialect.Dialect <init>
[mINFO: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL95Dialect
[mAug 03, 2022 7:21:09 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection
[mINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1b068f45] for (non-JTA) DDL execution was n
[mot in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
[mAug 03, 2022 7:21:09 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService
[mINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: cryostat started.
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.discovery.DiscoveryStorage Verticle
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Selected SSL KeyStore strategy with keystore /certs/cryostat-keystore.p12
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.net.HttpServer Verticle
[mHibernate: 
[m    /* select
[m        generatedAlias0 
[m    from
[m        PluginInfo as generatedAlias0 */ select
[m            plugininfo0_.id as id1_0_,
[m            plugininfo0_.callback as callback2_0_,
[m            plugininfo0_.realm as realm3_0_,
[m            plugininfo0_.subtree as subtree4_0_ 
[m        from
[m            PluginInfo plugininfo0_
[mAug 03, 2022 7:21:09 PM io.fabric8.kubernetes.client.Config tryServiceAccount
[mWARNING: Error reading service account token from: [/var/run/secrets/kubernetes.io/serviceaccount/token]. Ignoring.
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: HTTPS service running on https://localhost:8181
[mAug 03, 2022 7:21:09 PM io.fabric8.kubernetes.client.Config tryServiceAccount
[mWARNING: Error reading service account token from: [/var/run/secrets/kubernetes.io/serviceaccount/token]. Ignoring.
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Selecting configured AuthManager "io.cryostat.net.BasicAuthManager"
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Local save path for flight recordings set as /opt/cryostat.d/recordings.d
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service 3c9b11fa-954a-43a2-8edd-8b4e22d588a5 removed
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service 7fedc0e3-e572-4300-9a84-ef813b861b9f removed
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Selected Default Platform Strategy
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.net.web.WebServer Verticle
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.messaging.MessagingServer Verticle
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Max concurrent WebSocket connections: 2147483647
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.rules.RuleProcessor Verticle
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.net.HttpServer Verticle [aa6623ba-0507-400b-aa45-b0fe59972759]
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.messaging.MessagingServer Verticle [c353caca-af74-4f7d-8868-f8ad4dfc0b3b]
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.rules.RuleProcessor Verticle [1a5593cc-9c41-4043-8b4d-473914a5118a]
[mAug 03, 2022 7:21:09 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.net.web.WebServer Verticle [ed79bb4b-6a73-4b7b-a053-1cee03f735e0]
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:21:10 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mWARN: SQL Error: 0, SQLState: 23505
[mAug 03, 2022 7:21:10 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mERROR: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[mAug 03, 2022 7:21:10 PM org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release
[mINFO: HHH000010: On release of batch it still contained JDBC statements
[mAug 03, 2022 7:21:10 PM io.cryostat.core.log.Logger error
[mSEVERE: Exception thrown
[mjavax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more

[mAug 03, 2022 7:21:10 PM io.cryostat.core.log.Logger error
[mSEVERE: HTTP 500: javax.persistence.RollbackException: Error while committing the transaction
[mio.vertx.ext.web.handler.HttpException: Internal Server Error
[mCaused by: io.cryostat.net.web.http.api.v2.ApiException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:136)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: io.cryostat.discovery.RegistrationException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:128)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	... 10 more
[mCaused by: javax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	... 12 more
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more
[mAug 03, 2022 7:21:10 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:40848): POST /api/v2.2/discovery 500 41ms
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: Starting built-in discovery with DefaultPlatformClient
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: JDP Discovery started
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: Starting built-in discovery with CustomTargetPlatformClient
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mio.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:10010
[mCaused by: java.net.ConnectException: Connection refused
[m	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
[m	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
[m	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
[m	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:330)
[m	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
[m	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
[m	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
[m	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.discovery.DiscoveryStorage Verticle [8e3209f6-1b1f-4bcf-8d79-aac083efa036]
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service http://localhost:10010/cryostat-discovery removed
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:40850): POST /api/v2.2/discovery 201 9ms
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554471},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://localhost:9097/jmxrmi","alias":"code-with-quarkus","labels":{},"annotations":{"platform":{},"cryostat":{}}},"kind":"FOUND"}}}
[mAug 03, 2022 7:21:11 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:40850): POST /api/v2.2/discovery/bb21f525-d125-4067-b31f-8f13e5da5fae 200 10ms
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:12 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554472},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9091/jmxrmi","alias":"io.cryostat.Cryostat","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9091","JAVA_MAIN":"io.cryostat.Cryostat"}}},"kind":"FOUND"}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:14 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554474},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9093/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9093","JAVA_MAIN":"es.andrewazor.demo.Main"}}},"kind":"FOUND"}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:15 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554475},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9094/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9094","JAVA_MAIN":"es.andrewazor.demo.Main"}}},"kind":"FOUND"}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:15 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554475},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9095/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9095","JAVA_MAIN":"es.andrewazor.demo.Main"}}},"kind":"FOUND"}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:15 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554475},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9096/jmxrmi","alias":"/deployments/quarkus-run.jar","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9096","JAVA_MAIN":"/deployments/quarkus-run.jar"}}},"kind":"FOUND"
[m}}}
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:21:16 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659554476},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:10000/jmxrmi","alias":"/deployments/quarkus-run.jar","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"10000","JAVA_MAIN":"/deployments/quarkus-run.jar"}}},"kind":"FOUN
[mD"}}}

[mHibernate: 
[m    /* select
[m        generatedAlias0 
[m    from
[m        PluginInfo as generatedAlias0 */ select
[m            plugininfo0_.id as id1_0_,
[m            plugininfo0_.callback as callback2_0_,
[m            plugininfo0_.realm as realm3_0_,
[m            plugininfo0_.subtree as subtree4_0_ 
[m        from
[m            PluginInfo plugininfo0_
[mAug 03, 2022 7:22:00 PM io.cryostat.core.log.Logger info
[mINFO: (10.0.2.100:43836): GET /api/v1/targets 200 17ms

[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:32:11 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659555131},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://localhost:9097/jmxrmi","alias":"code-with-quarkus","labels":{},"annotations":{"platform":{},"cryostat":{}}},"kind":"LOST"}}}
[mAug 03, 2022 7:32:11 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:40850): DELETE /api/v2.2/discovery/bb21f525-d125-4067-b31f-8f13e5da5fae 200 8ms
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:32:23 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:38308): POST /api/v2.2/discovery 201 7ms
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:32:23 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659555143},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://localhost:9097/jmxrmi","alias":"code-with-quarkus","labels":{},"annotations":{"platform":{},"cryostat":{}}},"kind":"FOUND"}}}
[mAug 03, 2022 7:32:23 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:38308): POST /api/v2.2/discovery/2c873b3b-aebe-4fe6-942d-942515ea209d 200 5ms
[m^CAug 03, 2022 7:32:26 PM io.cryostat.core.log.Logger info
[mINFO: cryostat shutting down...
[m+ cleanup
[m+ podman pod stop cryostat-pod
[m740249fa625d6b5fa8024cb1a86c56e85334dc9d78ba81aa58ad190bfcaf3d78
[m+ podman pod rm cryostat-pod
[m740249fa625d6b5fa8024cb1a86c56e85334dc9d78ba81aa58ad190bfcaf3d78
[m[1;32mandrew@carbon [34m~/workspace/cryostat[31m :([33m (pluggable-discovery-hibernate) [34m$[22;39m sh smoketest.sh postgres
[m+ set -e
[m+ trap destroyPod EXIT
[m+ createPod
[m++ xpath -q -e 'project/properties/cryostat.rjmxPort/text()' pom.xml
[m+ local jmxPort=9091
[m++ xpath -q -e 'project/properties/cryostat.webPort/text()' pom.xml
[m+ local webPort=8181
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local datasourcePort=8080
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.port/text()' pom.xml
[m+ local grafanaPort=3000
[m+ podman pod create --replace --hostname cryostat --name cryostat-pod --publish 9091:9091 --publish 8181:8181 --publish 8080:8080 --publish 3000:3000 --publish 5432:5432 --publish 8081:8081 --publish 9093:9093 --
[mpublish 9094:9094 --publish 9095:9095 --publish 9096:9096 --publish 9999:9999 --publish 8082:8082 --publish 9990:9990 --publish 9991:9991 --publish 10000:10000 --publish 10001:10001
[m4e03b06296a4b03ca816d830084fa65eaeefc35ad06e684a03dc1ce8151f2ba6
[m+ '[' postgres = postgres ']'
[m+ runPostgres
[m++ dirname smoketest.sh
[m+ '[' '!' -d ./conf/postgres ']'
[m++ xpath -q -e 'project/properties/postgres.image/text()' pom.xml
[m+ local image=docker.io/postgres
[m++ xpath -q -e 'project/properties/postgres.version/text()' pom.xml
[m+ local version=13
[m++ dirname smoketest.sh
[m++ dirname smoketest.sh
[m+ podman run --name postgres --pod cryostat-pod --env POSTGRES_USER=postgres --env POSTGRES_PASSWORD=abcd1234 --mount type=bind,source=./conf/postgres,destination=/var/lib/postgresql/data/pgdata,relabel=shared --
[mmount type=bind,source=./src/test/resources/postgres,destination=/docker-entrypoint.initdb.d,relabel=shared --env PGDATA=/var/lib/postgresql/data/pgdata --rm -d docker.io/postgres:13
[md77e5ae445de4ab072ff86e22de4807edb48b904e7913b2374d6b3bc6bedeeaa
[m+ sleep 5
[m+ PGPASSWORD=abcd1234
[m+ psql -h localhost -p 5432 -U postgres -f src/test/resources/postgres/postgre.sql
[mpsql:src/test/resources/postgres/postgre.sql:10: NOTICE:  relation "plugininfo" already exists, skipping
[mCREATE TABLE
[m+ runDemoApps
[m+ podman run --name vertx-fib-demo-1 --env HTTP_PORT=8081 --env JMX_PORT=9093 --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[m372c7e9cd51345144c20192d98540b3b0262b224c399605eb7abdd70d2ddcec7
[m+ podman run --name vertx-fib-demo-2 --env HTTP_PORT=8081 --env JMX_PORT=9094 --env USE_AUTH=true --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[m8ab16dd3e622d8f0daba444ded0571c9068c9ebfd0e99be39e666de47856d93b
[m+ podman run --name vertx-fib-demo-3 --env HTTP_PORT=8081 --env JMX_PORT=9095 --env USE_SSL=true --env USE_AUTH=true --pod cryostat-pod --rm -d quay.io/andrewazores/vertx-fib-demo:0.8.0
[m9a5b65b07ed5242a0f81a5da316a431d81fc801bd8314f0107db5384b24c0b7d
[m+ podman run --name quarkus-test --pod cryostat-pod --rm -d quay.io/andrewazores/quarkus-test:0.0.2
[m3eb28add80af17bb4c821e5eaa7b3efefe94c316392f67d86f130ca20507a2c4
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webPort/text()' pom.xml
[m+ local webPort=8181
[m+ '[' -z '' ']'
[m+ local protocol=https
[m++ echo -n user:pass
[m++ base64
[m+ podman run --name quarkus-test-plugin --pod cryostat-pod --restart unless-stopped --env 'org.acme.CryostatService.Authorization=Basic dXNlcjpwYXNz' --env org.acme.CryostatService/mp-rest/url=https://localhost:8
[m181 --env org.acme.CryostatService.callback-host=localhost -d quay.io/andrewazores/quarkus-test:0.0.3
[m76f0ec0679e1ac2cc450cdfca4562d7c506d9ebbd6ee151b1523bd8a7c41e145
[m+ podman run --name wildfly --pod cryostat-pod --rm -d quay.io/andrewazores/wildfly-demo:v0.0.1
[ma73237a497fe2c49e7810f8aede3bfedc7f2a8605f7015db910265d549e9512f
[m+ runJfrDatasource
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.imageStream/text()' pom.xml
[m+ local stream=quay.io/cryostat/jfr-datasource
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.version/text()' pom.xml
[m+ local tag=latest
[m+ podman run --name jfr-datasource --pull always --pod cryostat-pod --rm -d quay.io/cryostat/jfr-datasource:latest
[mTrying to pull quay.io/cryostat/jfr-datasource:latest...
[mGetting image source signatures
[mCopying blob 16efd4d8dcb5 skipped: already exists  
[mCopying blob f3ae3fb50e1f skipped: already exists  
[mCopying blob e7bef371de76 skipped: already exists  
[mCopying blob 3cbba8687c73 skipped: already exists  
[mCopying config ea6027fd50 done  
[mWriting manifest to image destination
[mStoring signatures
[m9a0047f5e7ec3dc85ae651c6e6809de6b40c6c98b987024c0a21950a22afdf20
[m+ runGrafana
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.imageStream/text()' pom.xml
[m+ local stream=quay.io/cryostat/cryostat-grafana-dashboard
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.version/text()' pom.xml
[m+ local tag=latest
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ local host=localhost
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local port=8080
[m+ podman run --name grafana --pull always --pod cryostat-pod --env GF_INSTALL_PLUGINS=grafana-simple-json-datasource --env GF_AUTH_ANONYMOUS_ENABLED=true --env JFR_DATASOURCE_URL=http://localhost:8080 --rm -d qua
[my.io/cryostat/cryostat-grafana-dashboard:latest
[mTrying to pull quay.io/cryostat/cryostat-grafana-dashboard:latest...
[mGetting image source signatures
[mCopying blob 4f4fb700ef54 skipped: already exists  
[mCopying blob 3896f1893b61 skipped: already exists  
[mCopying blob a47a61bc8014 skipped: already exists  
[mCopying blob 5fb705585048 skipped: already exists  
[mCopying blob 4183cf92ef8e skipped: already exists  
[mCopying blob d5c8461e15b5 skipped: already exists  
[mCopying blob 09c9792bc5e2 skipped: already exists  
[mCopying blob d62880248252 skipped: already exists  
[mCopying blob 5798cae55176 skipped: already exists  
[mCopying blob d2fd0d291977 skipped: already exists  
[mCopying blob 5758d4e389a3 skipped: already exists  
[mCopying config ddd560e672 done  
[mWriting manifest to image destination
[mStoring signatures
[maeae23027693a1a99dcba620b5664dc24d3f719c0d2570de70905171d8eeb87e
[m+ runReportGenerator
[m+ local RJMX_PORT=10000
[m+ podman run --name reports --pull always --pod cryostat-pod --cpus 1 --memory 512M --restart on-failure --env 'JAVA_OPTIONS=-XX:ActiveProcessorCount=1 -XX:+UseSerialGC -Dorg.openjdk.jmc.flightrecorder.parser.sin
[mglethreaded=true -Dcom.sun.management.jmxremote.autodiscovery=true -Dcom.sun.management.jmxremote.port=10000 -Dcom.sun.management.jmxremote.rmi.port=10000 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.s
[mun.management.jmxremote.ssl=false' --env QUARKUS_HTTP_PORT=10001 --rm -d quay.io/cryostat/cryostat-reports:latest
[mTrying to pull quay.io/cryostat/cryostat-reports:latest...
[mGetting image source signatures
[mCopying blob 3c9734871c15 skipped: already exists  
[mCopying blob 537e009ccda2 skipped: already exists  
[mCopying blob 477cdcaeeeba skipped: already exists  
[mCopying blob d6aced47e09c skipped: already exists  
[mCopying blob e285ba5d0a41 skipped: already exists  
[mCopying blob be732b39cdc4 skipped: already exists  
[mCopying blob 873b36ac1cc0 skipped: already exists  
[mCopying config e4065524ca done  
[mWriting manifest to image destination
[mStoring signatures
[mcf04af8deceaa390b16136c29969fc31b6f3a4e550429d89cff7ab91f7f2ea82
[m+ runCryostat postgres
[m+++ readlink -f smoketest.sh
[m++ dirname /home/andrew/workspace/cryostat/smoketest.sh
[m+ local DIR=/home/andrew/workspace/cryostat
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ local host=localhost
[m++ xpath -q -e 'project/properties/cryostat.itest.jfr-datasource.port/text()' pom.xml
[m+ local datasourcePort=8080
[m++ xpath -q -e 'project/properties/cryostat.itest.grafana.port/text()' pom.xml
[m+ local grafanaPort=3000
[m+ '[' postgres = postgres ']'
[m+ JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat
[m+ JDBC_DRIVER=org.postgresql.Driver
[m+ HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect
[m+ JDBC_USERNAME=postgres
[m+ JDBC_PASSWORD=abcd1234
[m+ HBM2DDL=update
[m+ GRAFANA_DATASOURCE_URL=http://localhost:8080
[m+ GRAFANA_DASHBOARD_URL=http://localhost:3000
[m+ CRYOSTAT_RJMX_USER=smoketest
[m+ CRYOSTAT_RJMX_PASS=smoketest
[m+ CRYOSTAT_ALLOW_UNTRUSTED_SSL=true
[m+ CRYOSTAT_REPORT_GENERATOR=http://localhost:10001
[m+ CRYOSTAT_AUTH_MANAGER=io.cryostat.net.BasicAuthManager
[m+ CRYOSTAT_JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat
[m+ CRYOSTAT_JDBC_DRIVER=org.postgresql.Driver
[m+ CRYOSTAT_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect
[m+ CRYOSTAT_JDBC_USERNAME=postgres
[m+ CRYOSTAT_JDBC_PASSWORD=abcd1234
[m+ CRYOSTAT_HBM2DDL=update
[m+ exec /home/andrew/workspace/cryostat/run.sh
[m+ set -e
[m+ trap cleanup EXIT
[m+ '[' -z '' ']'
[m+ CRYOSTAT_IMAGE=quay.io/cryostat/cryostat:latest
[m+ echo -e '\n\nRunning quay.io/cryostat/cryostat:latest ...\n\n'


[mRunning quay.io/cryostat/cryostat:latest ...


[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.rjmxPort/text()' pom.xml
[m+ CRYOSTAT_RJMX_PORT=9091
[m+ '[' -z '' ']'
[m+ CRYOSTAT_RMI_PORT=9091
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webHost/text()' pom.xml
[m+ CRYOSTAT_WEB_HOST=localhost
[m+ '[' -z '' ']'
[m++ xpath -q -e 'project/properties/cryostat.itest.webPort/text()' pom.xml
[m+ CRYOSTAT_WEB_PORT=8181
[m+ '[' -z '' ']'
[m+ CRYOSTAT_EXT_WEB_PORT=8181
[m+ '[' -z io.cryostat.net.BasicAuthManager ']'
[m+ '[' -z '' ']'
[m+ CRYOSTAT_REPORT_GENERATION_MAX_HEAP=200
[m+ '[' -z '' ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' -f /home/andrew/workspace/cryostat/certs/cryostat-keystore.p12 ']'
[m+ KEYSTORE_PATH=/certs/cryostat-keystore.p12
[m+++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ cat /home/andrew/workspace/cryostat/certs/keystore.pass
[m+ KEYSTORE_PASS=XmB0OAa1wRAVWp0OBOM85--lHV4zJHNk
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/archive ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf/credentials ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/conf/rules ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/truststore ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/clientlib ']'
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ '[' '!' -d /home/andrew/workspace/cryostat/templates ']'
[m+ podman pod exists cryostat-pod
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m++ dirname /home/andrew/workspace/cryostat/run.sh
[m+ podman run --pod cryostat-pod --name cryostat --user 0 --memory 768M --mount type=bind,source=/home/andrew/workspace/cryostat/archive,destination=/opt/cryostat.d/recordings.d,relabel=shared --mount type=bind,so
[murce=/home/andrew/workspace/cryostat/certs,destination=/certs,relabel=shared --mount type=bind,source=/home/andrew/workspace/cryostat/clientlib,destination=/clientlib,relabel=shared --mount type=bind,source=/home
[m/andrew/workspace/cryostat/conf,destination=/opt/cryostat.d/conf.d,relabel=shared --mount type=bind,source=/home/andrew/workspace/cryostat/templates,destination=/opt/cryostat.d/templates.d,relabel=shared --mount 
[mtype=bind,source=/home/andrew/workspace/cryostat/truststore,destination=/truststore,relabel=shared --mount type=tmpfs,target=/opt/cryostat.d/probes.d -e CRYOSTAT_ENABLE_JDP_BROADCAST=true -e CRYOSTAT_REPORT_GENER
[mATOR=http://localhost:10001 -e CRYOSTAT_PLATFORM= -e CRYOSTAT_DISABLE_BUILTIN_DISCOVERY= -e CRYOSTAT_DISABLE_SSL= -e CRYOSTAT_DISABLE_JMX_AUTH= -e CRYOSTAT_ALLOW_UNTRUSTED_SSL=true -e CRYOSTAT_RJMX_USER=smoketest
[m -e CRYOSTAT_RJMX_PASS=smoketest -e CRYOSTAT_RJMX_PORT=9091 -e CRYOSTAT_RMI_PORT=9091 -e CRYOSTAT_CORS_ORIGIN= -e CRYOSTAT_WEB_HOST=localhost -e CRYOSTAT_WEB_PORT=8181 -e CRYOSTAT_EXT_WEB_PORT=8181 -e CRYOSTAT_MA
[mX_WS_CONNECTIONS= -e CRYOSTAT_AUTH_MANAGER=io.cryostat.net.BasicAuthManager -e CRYOSTAT_TARGET_CACHE_SIZE= -e CRYOSTAT_TARGET_CACHE_TTL= -e CRYOSTAT_CONFIG_PATH=/opt/cryostat.d/conf.d -e CRYOSTAT_ARCHIVE_PATH=/op
[mt/cryostat.d/recordings.d -e CRYOSTAT_TEMPLATE_PATH=/opt/cryostat.d/templates.d -e CRYOSTAT_PROBE_TEMPLATE_PATH=/opt/cryostat.d/probes.d -e CRYOSTAT_CLIENTLIB_PATH=/clientlib -e CRYOSTAT_REPORT_GENERATION_MAX_HEA
[mP=200 -e GRAFANA_DATASOURCE_URL=http://localhost:8080 -e GRAFANA_DASHBOARD_URL=http://localhost:3000 -e KEYSTORE_PATH=/certs/cryostat-keystore.p12 -e KEYSTORE_PASS=XmB0OAa1wRAVWp0OBOM85--lHV4zJHNk -e KEY_PATH= -e
[m CERT_PATH= -e CRYOSTAT_JUL_CONFIG= -e CRYOSTAT_JDBC_DRIVER=org.postgresql.Driver -e CRYOSTAT_JDBC_URL=jdbc:postgresql://cryostat:5432/cryostat -e CRYOSTAT_JDBC_USERNAME=postgres -e CRYOSTAT_JDBC_PASSWORD=abcd123
[m4 -e CRYOSTAT_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQL95Dialect -e CRYOSTAT_HBM2DDL=update --rm -it quay.io/cryostat/cryostat:latest
[mImporting certificate /truststore/vertx-fib-demo.cer ...
[mCertificate was added to keystore
[m[Storing /opt/cryostat.d/truststore.p12]
[mImporting certificate /truststore/dev-self-signed.cer ...
[mCertificate was added to keystore
[m[Storing /opt/cryostat.d/truststore.p12]
[m+ exec java -XX:+CrashOnOutOfMemoryError -Dcom.sun.management.jmxremote.port=9091 -Dcom.sun.management.jmxremote.rmi.port=9091 -Djavax.net.ssl.trustStore=/opt/cryostat.d/truststore.p12 -Djavax.net.ssl.trustStoreP
[massword=FfYDSbBL0meWCVXKUyuPYNWgys12OWBR -Dcom.sun.management.jmxremote.autodiscovery=true -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/tmp/jmxremote.password -Dc
[mom.sun.management.jmxremote.access.file=/tmp/jmxremote.access -Dcom.sun.management.jmxremote.ssl.need.client.auth=true -Djavax.net.ssl.keyStore=/certs/cryostat-keystore.p12 -Djavax.net.ssl.keyStorePassword=XmB0OA
[ma1wRAVWp0OBOM85--lHV4zJHNk -Dcom.sun.management.jmxremote.ssl=true -Dcom.sun.management.jmxremote.registry.ssl=true -cp '/app/resources:/app/classes:/app/libs/cryostat-core-2.12.0.jar:/app/libs/common-7.1.1.jar:/
[mapp/libs/encoder-1.2.2.jar:/app/libs/flightrecorder-7.1.1.jar:/app/libs/flightrecorder.rules-7.1.1.jar:/app/libs/flightrecorder.rules.jdk-7.1.1.jar:/app/libs/nashorn-core-15.4.jar:/app/libs/asm-7.3.1.jar:/app/lib
[ms/asm-commons-7.3.1.jar:/app/libs/asm-analysis-7.3.1.jar:/app/libs/asm-tree-7.3.1.jar:/app/libs/asm-util-7.3.1.jar:/app/libs/openshift-client-5.4.1.jar:/app/libs/openshift-model-5.4.1.jar:/app/libs/kubernetes-mod
[mel-common-5.4.1.jar:/app/libs/jackson-annotations-2.11.2.jar:/app/libs/openshift-model-operator-5.4.1.jar:/app/libs/openshift-model-operatorhub-5.4.1.jar:/app/libs/openshift-model-monitoring-5.4.1.jar:/app/libs/o
[mpenshift-model-console-5.4.1.jar:/app/libs/kubernetes-client-5.4.1.jar:/app/libs/kubernetes-model-core-5.4.1.jar:/app/libs/kubernetes-model-rbac-5.4.1.jar:/app/libs/kubernetes-model-admissionregistration-5.4.1.ja
[mr:/app/libs/kubernetes-model-apps-5.4.1.jar:/app/libs/kubernetes-model-autoscaling-5.4.1.jar:/app/libs/kubernetes-model-apiextensions-5.4.1.jar:/app/libs/kubernetes-model-batch-5.4.1.jar:/app/libs/kubernetes-mode
[ml-certificates-5.4.1.jar:/app/libs/kubernetes-model-coordination-5.4.1.jar:/app/libs/kubernetes-model-discovery-5.4.1.jar:/app/libs/kubernetes-model-events-5.4.1.jar:/app/libs/kubernetes-model-extensions-5.4.1.ja
[mr:/app/libs/kubernetes-model-flowcontrol-5.4.1.jar:/app/libs/kubernetes-model-networking-5.4.1.jar:/app/libs/kubernetes-model-metrics-5.4.1.jar:/app/libs/kubernetes-model-policy-5.4.1.jar:/app/libs/kubernetes-mod
[mel-scheduling-5.4.1.jar:/app/libs/kubernetes-model-storageclass-5.4.1.jar:/app/libs/kubernetes-model-node-5.4.1.jar:/app/libs/okhttp-3.12.12.jar:/app/libs/okio-1.15.0.jar:/app/libs/logging-interceptor-3.12.12.jar
[m:/app/libs/slf4j-api-1.7.30.jar:/app/libs/jackson-dataformat-yaml-2.11.2.jar:/app/libs/snakeyaml-1.26.jar:/app/libs/jackson-datatype-jsr310-2.11.2.jar:/app/libs/jackson-databind-2.11.2.jar:/app/libs/jackson-core-
[m2.11.2.jar:/app/libs/zjsonpatch-0.3.0.jar:/app/libs/generex-1.0.2.jar:/app/libs/automaton-1.11-8.jar:/app/libs/dagger-2.34.1.jar:/app/libs/javax.inject-1.jar:/app/libs/commons-lang3-3.12.0.jar:/app/libs/commons-c
[modec-1.15.jar:/app/libs/commons-io-2.8.0.jar:/app/libs/commons-validator-1.7.jar:/app/libs/commons-beanutils-1.9.4.jar:/app/libs/commons-digester-2.1.jar:/app/libs/commons-logging-1.2.jar:/app/libs/commons-collec
[mtions-3.2.2.jar:/app/libs/httpclient-4.5.13.jar:/app/libs/httpcore-4.4.13.jar:/app/libs/vertx-web-4.2.5.jar:/app/libs/vertx-web-common-4.2.5.jar:/app/libs/vertx-auth-common-4.2.5.jar:/app/libs/vertx-bridge-common
[m-4.2.5.jar:/app/libs/vertx-core-4.2.5.jar:/app/libs/netty-common-4.1.74.Final.jar:/app/libs/netty-buffer-4.1.74.Final.jar:/app/libs/netty-transport-4.1.74.Final.jar:/app/libs/netty-handler-4.1.74.Final.jar:/app/l
[mibs/netty-codec-4.1.74.Final.jar:/app/libs/netty-tcnative-classes-2.0.48.Final.jar:/app/libs/netty-handler-proxy-4.1.74.Final.jar:/app/libs/netty-codec-socks-4.1.74.Final.jar:/app/libs/netty-codec-http-4.1.74.Fin
[mal.jar:/app/libs/netty-codec-http2-4.1.74.Final.jar:/app/libs/netty-resolver-4.1.74.Final.jar:/app/libs/netty-resolver-dns-4.1.74.Final.jar:/app/libs/netty-codec-dns-4.1.74.Final.jar:/app/libs/vertx-web-client-4.
[m2.5.jar:/app/libs/vertx-web-graphql-4.2.5.jar:/app/libs/graphql-java-17.3.jar:/app/libs/java-dataloader-3.1.0.jar:/app/libs/antlr4-runtime-4.9.2.jar:/app/libs/reactive-streams-1.0.3.jar:/app/libs/graphql-java-ext
[mended-scalars-17.0.jar:/app/libs/nimbus-jose-jwt-9.16.1.jar:/app/libs/jcip-annotations-1.0-1.jar:/app/libs/bcprov-jdk15on-1.69.jar:/app/libs/slf4j-jdk14-1.7.30.jar:/app/libs/gson-2.8.9.jar:/app/libs/caffeine-3.0.
[m1.jar:/app/libs/jsoup-1.14.2.jar:/app/libs/hibernate-core-5.6.7.Final.jar:/app/libs/jboss-logging-3.4.3.Final.jar:/app/libs/javax.persistence-api-2.2.jar:/app/libs/byte-buddy-1.12.8.jar:/app/libs/antlr-2.7.7.jar:
[m/app/libs/jboss-transaction-api_1.2_spec-1.1.1.Final.jar:/app/libs/jandex-2.4.2.Final.jar:/app/libs/classmate-1.5.1.jar:/app/libs/javax.activation-api-1.2.0.jar:/app/libs/hibernate-commons-annotations-5.1.2.Final
[m.jar:/app/libs/jaxb-api-2.3.1.jar:/app/libs/jaxb-runtime-2.3.1.jar:/app/libs/txw2-2.3.1.jar:/app/libs/istack-commons-runtime-3.0.7.jar:/app/libs/stax-ex-1.8.jar:/app/libs/FastInfoset-1.2.15.jar:/app/libs/hibernat
[me-types-55-2.17.1.jar:/app/libs/h2-1.4.197.jar:/app/libs/postgresql-42.4.0.jar:/app/libs/checker-qual-3.5.0.jar:/clientlib/*' @/app/jib-main-class-file
[mAug 03, 2022 7:32:51 PM io.cryostat.core.log.Logger info
[mINFO: Local config path set as /opt/cryostat.d/conf.d
[mAug 03, 2022 7:32:51 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation
[mINFO: HHH000204: Processing PersistenceUnitInfo [name: io.cryostat]
[mAug 03, 2022 7:32:51 PM org.hibernate.Version logVersion
[mINFO: HHH000412: Hibernate ORM core version 5.6.7.Final
[mAug 03, 2022 7:32:51 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager <clinit>
[mINFO: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
[mAug 03, 2022 7:32:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
[mWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)
[mAug 03, 2022 7:32:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001005: using driver [org.postgresql.Driver] at URL [jdbc:postgresql://cryostat:5432/cryostat]
[mAug 03, 2022 7:32:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001001: Connection properties: {password=****, user=postgres}
[mAug 03, 2022 7:32:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator
[mINFO: HHH10001003: Autocommit mode: false
[mAug 03, 2022 7:32:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections <init>
[mINFO: HHH000115: Hibernate connection pool size: 20 (min=1)
[mAug 03, 2022 7:32:52 PM org.hibernate.dialect.Dialect <init>
[mINFO: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL95Dialect
[mAug 03, 2022 7:32:52 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection
[mINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1b068f45] for (non-JTA) DDL execution was n
[mot in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
[mAug 03, 2022 7:32:52 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService
[mINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: cryostat started.
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.discovery.DiscoveryStorage Verticle
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Selected SSL KeyStore strategy with keystore /certs/cryostat-keystore.p12
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.net.HttpServer Verticle
[mHibernate: 
[m    /* select
[m        generatedAlias0 
[m    from
[m        PluginInfo as generatedAlias0 */ select
[m            plugininfo0_.id as id1_0_,
[m            plugininfo0_.callback as callback2_0_,
[m            plugininfo0_.realm as realm3_0_,
[m            plugininfo0_.subtree as subtree4_0_ 
[m        from
[m            PluginInfo plugininfo0_
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service a908e279-a28d-4dac-ac61-3d1f9d62221f removed
[mAug 03, 2022 7:32:52 PM io.fabric8.kubernetes.client.Config tryServiceAccount
[mWARNING: Error reading service account token from: [/var/run/secrets/kubernetes.io/serviceaccount/token]. Ignoring.
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service f003c234-af6f-43e0-90f2-1c746123ed88 removed
[mAug 03, 2022 7:32:52 PM io.fabric8.kubernetes.client.Config tryServiceAccount
[mWARNING: Error reading service account token from: [/var/run/secrets/kubernetes.io/serviceaccount/token]. Ignoring.
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: HTTPS service running on https://localhost:8181
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Selected Default Platform Strategy
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Selecting configured AuthManager "io.cryostat.net.BasicAuthManager"
[mAug 03, 2022 7:32:52 PM io.cryostat.core.log.Logger info
[mINFO: Local save path for flight recordings set as /opt/cryostat.d/recordings.d
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.net.web.WebServer Verticle
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.messaging.MessagingServer Verticle
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Max concurrent WebSocket connections: 2147483647
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deploying io.cryostat.rules.RuleProcessor Verticle
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.net.HttpServer Verticle [8584e8b3-a42d-4656-9c8a-c77092d4256b]
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.messaging.MessagingServer Verticle [0224c96a-da78-4dbf-898d-678675c2e2a4]
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.rules.RuleProcessor Verticle [8054de92-00c8-4b6b-913c-786ef391c8c0]
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.net.web.WebServer Verticle [daf9405f-6960-4ee2-a39d-a5745b972763]
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:32:53 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mWARN: SQL Error: 0, SQLState: 23505
[mAug 03, 2022 7:32:53 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mERROR: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[mAug 03, 2022 7:32:53 PM org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release
[mINFO: HHH000010: On release of batch it still contained JDBC statements
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger error
[mSEVERE: Exception thrown
[mjavax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more

[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger error
[mSEVERE: HTTP 500: javax.persistence.RollbackException: Error while committing the transaction
[mio.vertx.ext.web.handler.HttpException: Internal Server Error
[mCaused by: io.cryostat.net.web.http.api.v2.ApiException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:136)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: io.cryostat.discovery.RegistrationException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:128)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	... 10 more
[mCaused by: javax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	... 12 more
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more
[mAug 03, 2022 7:32:53 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:52538): POST /api/v2.2/discovery 500 41ms
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:32:54 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mWARN: SQL Error: 0, SQLState: 23505
[mAug 03, 2022 7:32:54 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
[mERROR: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[mAug 03, 2022 7:32:54 PM org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release
[mINFO: HHH000010: On release of batch it still contained JDBC statements
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger error
[mSEVERE: Exception thrown
[mjavax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more

[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger error
[mSEVERE: HTTP 500: javax.persistence.RollbackException: Error while committing the transaction
[mio.vertx.ext.web.handler.HttpException: Internal Server Error
[mCaused by: io.cryostat.net.web.http.api.v2.ApiException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:136)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:75)
[m	at io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)
[m	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)
[m	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
[m	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)
[m	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
[m	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mCaused by: io.cryostat.discovery.RegistrationException: javax.persistence.RollbackException: Error while committing the transaction
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:128)
[m	at io.cryostat.net.web.http.api.v2.DiscoveryRegistrationHandler.handle(DiscoveryRegistrationHandler.java:111)
[m	at io.cryostat.net.web.http.api.v2.AbstractV2RequestHandler.handle(AbstractV2RequestHandler.java:123)
[m	... 10 more
[mCaused by: javax.persistence.RollbackException: Error while committing the transaction
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
[m	at io.cryostat.storage.AbstractDao.save(AbstractDao.java:69)
[m	at io.cryostat.discovery.PluginInfoDao.save(PluginInfoDao.java:65)
[m	at io.cryostat.discovery.DiscoveryStorage.register(DiscoveryStorage.java:124)
[m	... 12 more
[mCaused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)
[m	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)
[m	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65)
[m	... 16 more
[mCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
[m	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
[m	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
[m	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
[m	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)
[m	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)
[m	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
[m	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
[m	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
[m	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
[m	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
[m	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
[m	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
[m	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
[m	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
[m	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)
[m	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)
[m	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
[m	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
[m	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
[m	... 15 more
[mCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "uk_327a0brnd0x5y3tmsyg7522ul"
[m  Detail: Key (realm)=(quarkus-test) already exists.
[m	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
[m	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
[m	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
[m	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
[m	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:181)
[m	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:149)
[m	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
[m	... 35 more
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:52554): POST /api/v2.2/discovery 500 5ms
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: Starting built-in discovery with CustomTargetPlatformClient
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: Starting built-in discovery with DefaultPlatformClient
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: JDP Discovery started
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mio.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:10010
[mCaused by: java.net.ConnectException: Connection refused
[m	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
[m	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
[m	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
[m	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:330)
[m	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
[m	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
[m	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
[m	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
[m	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
[m	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
[m	at java.base/java.lang.Thread.run(Thread.java:833)
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: Deployed io.cryostat.discovery.DiscoveryStorage Verticle [446c5635-ae7d-4685-875e-d3af2fc78e0c]
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* delete io.cryostat.discovery.PluginInfo */ delete 
[m        from
[m            PluginInfo 
[m        where
[m            id=?
[mAug 03, 2022 7:32:54 PM io.cryostat.core.log.Logger info
[mINFO: Stale discovery service http://localhost:10010/cryostat-discovery removed
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:32:56 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659555176},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9091/jmxrmi","alias":"io.cryostat.Cryostat","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9091","JAVA_MAIN":"io.cryostat.Cryostat"}}},"kind":"FOUND"}}}
[mHibernate: 
[m    /* insert io.cryostat.discovery.PluginInfo
[m        */ insert 
[m        into
[m            PluginInfo
[m            (callback, realm, subtree, id) 
[m        values
[m            (?, ?, ?, ?)
[mAug 03, 2022 7:32:56 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:52570): POST /api/v2.2/discovery 201 5ms
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:32:56 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659555176},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://localhost:9097/jmxrmi","alias":"code-with-quarkus","labels":{},"annotations":{"platform":{},"cryostat":{}}},"kind":"FOUND"}}}
[mAug 03, 2022 7:32:56 PM io.cryostat.core.log.Logger info
[mINFO: (127.0.0.1:52570): POST /api/v2.2/discovery/868963fc-6000-4f59-947d-d983a8b00ddb 200 6ms
[mHibernate: 
[m    select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* load io.cryostat.discovery.PluginInfo */ select
[m        plugininfo0_.id as id1_0_0_,
[m        plugininfo0_.callback as callback2_0_0_,
[m        plugininfo0_.realm as realm3_0_0_,
[m        plugininfo0_.subtree as subtree4_0_0_ 
[m    from
[m        PluginInfo plugininfo0_ 
[m    where
[m        plugininfo0_.id=?
[mHibernate: 
[m    /* update
[m        io.cryostat.discovery.PluginInfo */ update
[m            PluginInfo 
[m        set
[m            callback=?,
[m            realm=?,
[m            subtree=? 
[m        where
[m            id=?
[mAug 03, 2022 7:32:58 PM io.cryostat.core.log.Logger info
[mINFO: Outgoing WS message: {"meta":{"category":"TargetJvmDiscovery","type":{"type":"application","subType":"json"},"serverTime":1659555178},"message":{"event":{"serviceRef":{"connectUrl":"service:jmx:rmi:///jndi/
[mrmi://cryostat:9093/jmxrmi","alias":"es.andrewazor.demo.Main","labels":{},"annotations":{"platform":{},"cryostat":{"HOST":"cryostat","PORT":"9093","JAVA_MAIN":"es.andrewazor.demo.Main"}}},"kind":"FOUND"}}}
